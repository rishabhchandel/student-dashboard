var app = angular.module("app", [
	"ngSanitize",
	"ngResource",
	"ui.router",
	"app.config",
	"app.constants",
	"app.user-list",
	"xeditable"
]).config([
	"$urlRouterProvider",
	"$stateProvider",
	function(a, b) {
		a.otherwise("/users"),
		b.state("app", {
			abstract: !0,
			template: "<ui-view/>"
		})
	}
]).run([
	"editableOptions",
	function(a) {
		a.theme = "bs3"
	}
]);
angular.module("app.config", []).constant("ENV", {
	name: "local",
	apiEndpoint: "http://localhost:9999/api/v1",
	enableDebug: !0
}),
angular.module("app.directives", []),
angular.module("app.filters", []),
angular.module("app.constants", ["ngResource"]),
angular.module("app.restServices", ["ngResource"]).factory("Users", [
	"$resource",
	"ENV",
	function(a, b) {
		return a(b.apiEndpoint + "/users/:id", null, {
			update: {
				method: "PUT"
			}
		})
	}
]),
angular.module("app.services", []),
angular.module("app.user-list", []).config([
	"$stateProvider",
	function(a) {
		a.state("users", {
			url: "/users",
			templateUrl: "components/user/user-list.html",
			controller: "userListCtrl"
		})
	}
]).controller("userListCtrl", [
	"$scope",
	"$http",
	"$filter",
	function(a, b, c) {
		a.users = [
			{
				id: 1,
				name: "awesome user1",
				status: 2,
				group: "admin"
			}, {
				id: 2,
				name: "awesome user2",
				status: void 0,
				group: "guest"
			}, {
				id: 3,
				name: "awesome user3",
				status: 2,
				group: "vip"
			}
		],
		a.statuses = [
			{
				value: 1,
				text: "status1"
			}, {
				value: 2,
				text: "status2"
			}, {
				value: 3,
				text: "status3"
			}, {
				value: 4,
				text: "status4"
			}
		],
		a.groups = [
			{
				value: "admin",
				text: "Admin"
			}, {
				value: "vip",
				text: "Vip"
			}, {
				value: "guest",
				text: "Guest"
			}, {
				value: "owner",
				text: "Owner"
			}
		],
		a.showGroup = function(b) {
			if (b.group && a.groups.length) {
				var d = c("filter")(a.groups, {value: b.group});
				return d.length
					? d[0].text
					: "Not set"
			}
			return b.groupName || "Not set"
		},
		a.showStatus = function(b) {
			var d = [];
			return b.status && (d = c("filter")(a.statuses, {value: b.status})),
			d.length
				? d[0].text
				: "Not set"
		},
		a.checkName = function(a, b) {
			if (2 === b && "awesome" !== a)
				return "Username 2 should be `awesome`"
		},
		a.saveUser = function(a, c) {
			return angular.extend(a, {id: c}),
			b.post("/saveUser", a)
		},
		a.removeUser = function(b) {
			a.users.splice(b, 1)
		},
		a.addUser = function(b) {
			console.log(b),
			a.inserted = {
				id: a.users.length + 1,
				name: "",
				status: null,
				group: null
			},
			a.users.push(a.inserted)
		}
	}
]);
